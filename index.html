<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Personal Feed &lt;3</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="theme-mskuromi.css">
</head>


<body>
    <div class="custom-cursor" id="cursor">‚ú¶</div>
    <div class="sync-indicator" id="syncStatus">Connecting...</div>

    <!-- Win95 Desktop -->
    <div id="w95-desktop">
        <div class="w95-desktop-icon" data-app="feed" tabindex="0">
            <div class="desktop-icon-img">&#128240;</div>
            <div class="desktop-icon-label">Feed.exe</div>
        </div>
        <div class="w95-desktop-icon" data-app="chat" tabindex="0">
            <div class="desktop-icon-img">&#128172;</div>
            <div class="desktop-icon-label">Chat.exe</div>
        </div>
        <div class="w95-desktop-icon" data-app="garden" tabindex="0">
            <div class="desktop-icon-img">&#127807;</div>
            <div class="desktop-icon-label">Garden.exe</div>
        </div>
        <div class="w95-desktop-icon" data-app="achievements" tabindex="0">
            <div class="desktop-icon-img">&#127942;</div>
            <div class="desktop-icon-label">Achievements.exe</div>
        </div>
        <div class="w95-desktop-icon" data-app="mailbox" tabindex="0" id="mailboxDesktopIcon">
            <div class="desktop-icon-img mailbox-icon-img" style="overflow:visible;font-size:0;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="36" height="36" style="display:block;">
                    <!-- Post -->
                    <rect x="17" y="26" width="4" height="14" fill="#888"/>
                    <!-- Mailbox body (American curbside rounded-top style) -->
                    <rect x="3" y="13" width="28" height="14" rx="7" fill="#C0C0C0" stroke="#555" stroke-width="1"/>
                    <!-- Door slot -->
                    <rect x="4" y="21" width="11" height="4" rx="1" fill="#909090" stroke="#555" stroke-width="0.5"/>
                    <!-- Flag DOWN (default ‚Äì no unread mail) -->
                    <g class="mailbox-flag-down">
                        <rect x="31" y="18" width="8" height="2" fill="#CC3300" rx="0.5"/>
                        <rect x="37" y="16" width="2" height="6" fill="#DD1111" rx="0.5"/>
                    </g>
                    <!-- Flag UP (shown when there is unread mail) -->
                    <g class="mailbox-flag-up" style="display:none;">
                        <rect x="31" y="10" width="2" height="10" fill="#CC3300" rx="0.5"/>
                        <rect x="31" y="9" width="7" height="4" fill="#DD1111" rx="0.5"/>
                    </g>
                </svg>
            </div>
            <div class="desktop-icon-label">Mailbox.exe</div>
        </div>
        <div class="w95-desktop-icon" data-app="jukebox" tabindex="0">
            <div class="desktop-icon-img" style="font-size:22px;">&#127926;</div>
            <div class="desktop-icon-label">Jukebox.exe</div>
        </div>
    </div>

    <!-- Login Overlay -->
    <div id="loginOverlay">
        <div class="login-box">
            <div class="login-emoji">&lt;3</div>
            <h1 class="login-title">Your Feed</h1>
            <p class="login-subtitle">Sign in to continue</p>
            <button id="loginGoogleBtn" class="google-signin-btn">
                <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Sign in with Google
            </button>
        </div>
    </div>

    <!-- Access Denied Overlay -->
    <div id="accessDeniedOverlay">
        <div class="login-box">
            <div class="login-emoji">(>_<)</div>
            <h1 class="login-title">Access Denied</h1>
            <p class="login-subtitle">Your account isn't on the access list.</p>
            <button id="signOutDeniedBtn" class="google-signin-btn">Sign out and try another account</button>
        </div>
    </div>

    <!-- Feed Window -->
    <div id="w95-win-feed" class="w95-window is-hidden" style="left:30px;top:20px;width:calc(100vw - 60px);height:calc(100vh - 60px);">
        <div class="w95-titlebar" id="w95-feed-handle">
            <div class="w95-title">Feed.exe</div>
            <button class="w95-control" id="w95-feed-min" type="button" aria-label="Minimise">_</button>
            <button class="w95-control" id="w95-feed-max" type="button" aria-label="Maximise">&#9633;</button>
            <button class="w95-control w95-control-close" id="w95-feed-close" type="button" aria-label="Close">X</button>
        </div>
        <div class="w95-body w95-feed-body" id="w95-feed-body">

    <div class="max-w-2xl mx-auto feed-container">

        <!-- Header -->
        <div class="text-center mb-8 text-white">
            <div class="flex items-center justify-center gap-3 mb-2">
                <h1 class="text-5xl font-extrabold header-title" id="feedTitle" title="Back to all posts">Your Feed</h1>
                <span class="header-emoji">&lt;3</span>
                <button id="darkModeBtn" class="text-2xl hover:scale-110 transition-transform opacity-70 hover:opacity-100 ml-1" title="Toggle dark mode">
                    <span id="darkModeIcon">‚òæ</span>
                </button>
                <button id="notifBtn" class="hover:opacity-100 ml-1" title="Enable desktop notifications">[!]</button>
            </div>
            <p class="text-sm font-medium tracking-wide header-subtitle">posts curated just for you</p>
            <div class="retro-divider">-¬∑-¬∑-¬∑- ^_^ -¬∑-¬∑-¬∑-</div>
            <div class="retro-divider" style="margin-bottom:4px;">
                <span class="retro-badge">internet</span>
                <span class="retro-badge">&#x2665; besties</span>
                <span class="retro-badge">since 2023</span>
            </div>
            <button id="userIndicator" class="user-indicator-btn" title="Switch user"></button>
        </div>

        <!-- Main Navigation -->
        <div class="flex justify-center mb-5">
            <div class="nav-glass">
                <button id="navAddPost" class="nav-btn">
                    [+] Add Post
                </button>
                <button id="navCollections" class="nav-btn">
                    [dir] Collections
                </button>
                <button id="navSources" class="nav-btn">
                    [url] Sources
                </button>
                <button id="navBoards" class="nav-btn">
                    [::] Boards
                </button>
            </div>
        </div>

        <!-- Active Filters Banner -->
        <div id="activeFiltersBanner" class="hidden filters-banner-gap">
            <div class="filters-banner-inner">
                <div class="filters-pills-row">
                    <span class="filters-label">Filters</span>
                    <span id="activeCollectionPill" class="collection-badge hidden"></span>
                    <span id="activeSourcePill" class="collection-badge hidden"></span>
                </div>
                <button id="clearFiltersBtn" class="clear-filters-btn">Clear</button>
            </div>
        </div>

        <!-- Filter Buttons -->
        <div id="filterButtons" class="flex justify-center items-center gap-3 mb-8 flex-wrap">
            <div class="filter-glass">
                <button id="btnAll" class="filter-btn active">* All</button>
                <button id="btnNew" class="filter-btn">** New <span id="newCount" class="new-badge hidden">0</span></button>
                <button id="btnSeen" class="filter-btn">&lt;3 Seen</button>
                <button id="btnFav" class="filter-btn">&#x2665; Saved</button>
                <button id="btnWatchLater" class="filter-btn">[&gt;] Watch Later</button>
                <button id="btnOtherUser" class="filter-btn">&lt;3 Just Tero</button>
            </div>
            <button id="btnMarkAll" class="mark-all-btn hidden">Mark All Seen</button>
        </div>

        <!-- Search -->
        <div id="searchWrap" class="search-wrap">
            <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0"/>
            </svg>
            <input type="text" id="searchInput" class="search-input" placeholder="Search posts...">
            <button id="searchClear" class="search-clear hidden" title="Clear">‚úï</button>
        </div>

        <!-- Boards Section -->
        <div id="boardsSection" class="hidden space-y-5">
            <div class="boards-header">
                <h2 class="boards-title">Boards</h2>
                <button class="btn-primary boards-action-btn" onclick="openCreateBoardModal()">+ New Board</button>
            </div>
            <div id="boardsList"></div>
            <div id="boardDetail" class="hidden">
                <button class="board-back-btn" onclick="closeBoardDetail()">‚Üê Back to boards</button>
                <div id="boardDetailHeader" class="boards-header mb-4"></div>
                <div id="boardDetailPosts" class="space-y-5"></div>
            </div>
        </div>

        <!-- Retro divider before posts -->
        <div class="retro-divider" id="feedDivider">¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑</div>

        <!-- Feed Section -->
        <div id="feedSection" class="space-y-5">
            <div id="postsContainer" class="space-y-5"></div>
            <div id="emptyState" class="empty-state hidden">
                <div class="text-5xl mb-5">&lt;3</div>
                <h3 class="text-2xl font-bold mb-2 empty-state-title">No Posts Yet</h3>
                <p class="text-sm mb-6 empty-state-text">Start adding posts to create your personalised feed</p>
                <button id="emptyStateAddBtn" class="btn-primary px-8 py-3 text-sm font-semibold rounded-full">
                    Make a new post
                </button>
            </div>
        </div>
    </div>

        </div><!-- /.w95-feed-body -->
    </div><!-- /#w95-win-feed -->

    <!-- Keyboard Shortcuts Modal -->
    <div id="shortcutsModal" class="modal">
        <div class="modal-content modal-sm">
            <button class="modal-x" id="shortcutsModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-1 modal-heading">[kbd] Keyboard Shortcuts</h2>
            <p class="text-sm mb-5 modal-subtext">Press <kbd>?</kbd> anytime to see this</p>

            <div class="shortcuts-section">
                <div class="shortcuts-section-title">Navigate</div>
                <div class="shortcut-row"><kbd>J</kbd> <span>Next post</span></div>
                <div class="shortcut-row"><kbd>K</kbd> <span>Previous post</span></div>
            </div>

            <div class="shortcuts-section">
                <div class="shortcuts-section-title">Focused post</div>
                <div class="shortcut-row"><kbd>L</kbd> <span>React with &lt;3</span></div>
                <div class="shortcut-row"><kbd>F</kbd> <span>Save / unsave</span></div>
            </div>

            <div class="shortcuts-section">
                <div class="shortcuts-section-title">App</div>
                <div class="shortcut-row"><kbd>N</kbd> <span>New post</span></div>
                <div class="shortcut-row"><kbd>M</kbd> <span>Open chat</span></div>
                <div class="shortcut-row"><kbd>/</kbd> <span>Search</span></div>
                <div class="shortcut-row"><kbd>?</kbd> <span>This help screen</span></div>
                <div class="shortcut-row"><kbd>Esc</kbd> <span>Close / dismiss</span></div>
            </div>
        </div>
    </div>

    <!-- Type Picker Modal -->
    <div id="typePickerModal" class="modal">
        <div class="modal-content modal-xs">
            <button class="modal-x" id="typePickerModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">What do you want to share?</h2>
            <div class="type-picker-grid">
                <button class="type-picker-btn" id="typePickLink">
                    <span class="type-picker-icon">[url]</span>
                    <span class="type-picker-label">Link</span>
                </button>
                <button class="type-picker-btn" id="typePickPhoto">
                    <span class="type-picker-icon">[img]</span>
                    <span class="type-picker-label">Photo</span>
                </button>
                <button class="type-picker-btn" id="typePickPoll">
                    <span class="type-picker-icon">[===]</span>
                    <span class="type-picker-label">Poll</span>
                </button>
                <button class="type-picker-btn" id="typePickMovie">
                    <span class="type-picker-icon">[vid]</span>
                    <span class="type-picker-label">Movie / Show</span>
                </button>
                <button class="type-picker-btn" id="typePickText">
                    <span class="type-picker-icon">[txt]</span>
                    <span class="type-picker-label">Text</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Poll Modal -->
    <div id="pollModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="pollModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">[===] Create a Poll</h2>
            <div class="space-y-4">
                <div class="form-field">
                    <label class="form-label">Question</label>
                    <textarea id="pollQuestion" rows="2" placeholder="What should we watch tonight?"></textarea>
                </div>
                <div class="form-field">
                    <label class="form-label">Options</label>
                    <input type="text" id="pollOpt0" placeholder="Option 1‚Ä¶">
                    <input type="text" id="pollOpt1" placeholder="Option 2‚Ä¶" class="poll-opt-input">
                    <input type="text" id="pollOpt2" placeholder="Option 3 (optional)‚Ä¶" class="poll-opt-input">
                    <input type="text" id="pollOpt3" placeholder="Option 4 (optional)‚Ä¶" class="poll-opt-input">
                </div>
                <div class="form-field">
                    <label class="form-label">Poll ends at</label>
                    <input type="datetime-local" id="pollEndsAt">
                </div>
                <button id="createPollBtn" class="btn-primary w-full py-4 text-base font-bold rounded-xl">Create Poll</button>
            </div>
        </div>
    </div>

    <!-- Image Post Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="imageModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">[img] Share a Photo</h2>
            <div class="space-y-4">
                <div class="form-field">
                    <label class="form-label">Photo</label>
                    <label class="image-upload-label">
                        <input type="file" id="imageFile" accept="image/*" class="sr-only">
                        <span class="image-upload-text">Click to choose a photo</span>
                    </label>
                    <div id="imagePreview"></div>
                </div>
                <div class="form-field">
                    <label class="form-label">Caption (optional)</label>
                    <textarea id="imageCaption" rows="2" placeholder="Say something‚Ä¶"></textarea>
                </div>
                <button id="sharePhotoBtn" class="btn-primary w-full py-4 text-base font-bold rounded-xl">Share Photo</button>
                <p id="imageUploadError" style="color:#e53e3e;font-size:0.875rem;margin-top:0.5rem;word-break:break-word"></p>
            </div>
        </div>
    </div>

    <!-- Movie / Show Rec Modal -->
    <div id="movieModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="movieModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">[vid] Recommend something</h2>
            <div class="space-y-4">
                <div class="form-field">
                    <label class="form-label">Title</label>
                    <input type="text" id="recTitle" placeholder="The Bear, Dune, etc.">
                </div>
                <div class="form-field">
                    <label class="form-label">Type</label>
                    <div id="mediaTypePicker" class="media-type-picker-wrap">
                        <button type="button" class="type-toggle-btn active" id="mediaTypeMovie">[vid] Movie</button>
                        <button type="button" class="type-toggle-btn" id="mediaTypeShow">[tv] Show</button>
                    </div>
                    <input type="hidden" id="recMediaType" value="movie">
                </div>
                <div class="form-field">
                    <label class="form-label">Where to watch</label>
                    <input type="text" id="recService" placeholder="Netflix, Disney+, cinema‚Ä¶">
                </div>
                <div class="form-field">
                    <label class="form-label">Rating</label>
                    <div id="starPicker" class="star-picker">
                        <button type="button" id="star1">‚òÖ</button>
                        <button type="button" id="star2">‚òÖ</button>
                        <button type="button" id="star3">‚òÖ</button>
                        <button type="button" id="star4">‚òÖ</button>
                        <button type="button" id="star5">‚òÖ</button>
                    </div>
                    <input type="hidden" id="recRating" value="0">
                </div>
                <div class="form-field">
                    <label class="form-label">Note (optional)</label>
                    <textarea id="recNote" rows="2" placeholder="Why you loved it‚Ä¶"></textarea>
                </div>
                <div class="form-field">
                    <label class="form-label">Letterboxd link (optional)</label>
                    <input type="url" id="recLetterboxd" placeholder="https://letterboxd.com/film/‚Ä¶">
                </div>
                <button id="addMovieRecBtn" class="btn-primary w-full py-4 text-base font-bold rounded-xl">Add Recommendation</button>
            </div>
        </div>
    </div>

    <!-- Add Post Modal -->
    <div id="addPostModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="addPostModalClose" title="Close">‚úï</button>
            <h2 class="text-2xl font-bold mb-4 modal-heading" id="addPostModalHeading">Add a Post</h2>
            <div class="space-y-5">
                <!-- Link-only fields -->
                <div id="linkFields">
                    <div class="form-field">
                        <label class="form-label">Post URL</label>
                        <input type="url" id="postUrl" placeholder="https://...">
                    </div>
                    <div class="form-field mt-5">
                        <label class="form-label">Note (Optional)</label>
                        <textarea id="postNote" placeholder="Why you thought they'd like this..." rows="3"></textarea>
                    </div>
                </div>
                <!-- Text-only fields -->
                <div id="textFields" class="hidden">
                    <div class="form-field">
                        <label class="form-label">Heading (Optional)</label>
                        <input type="text" id="postHeading" placeholder="Title...">
                    </div>
                    <div class="form-field mt-5">
                        <label class="form-label">Text</label>
                        <textarea id="postBody" placeholder="What's on your mind..." rows="5"></textarea>
                    </div>
                </div>
                <div class="form-field">
                    <label class="form-label">Collections <span class="coll-pick-label">(pick any)</span></label>
                    <div id="collectionPicker" class="coll-picker-wrap">
                        <button type="button" class="coll-pick-btn" data-val="funny">xD Funny</button>
                        <button type="button" class="coll-pick-btn" data-val="cute">^_^ Cute</button>
                        <button type="button" class="coll-pick-btn" data-val="news">[news] News</button>
                        <button type="button" class="coll-pick-btn" data-val="inspiration">* Inspiration</button>
                        <button type="button" class="coll-pick-btn" data-val="music">&#x266B; Music</button>
                        <button type="button" class="coll-pick-btn" data-val="idiot-drivers">&gt;:( Drivers</button>
                        <button type="button" class="coll-pick-btn" data-val="wishlist">[w] Wishlist</button>
                        <button type="button" class="coll-pick-btn" data-val="other">[+] Other</button>
                    </div>
                </div>
                <div class="form-field">
                    <label class="capsule-toggle-row">
                        <input type="checkbox" id="timeCapsuleToggle" onchange="document.getElementById('timeCapsulePicker').classList.toggle('hidden',!this.checked)">
                        <span>üîí Time Capsule ‚Äî hide until‚Ä¶</span>
                    </label>
                    <input type="datetime-local" id="timeCapsulePicker" class="hidden mt-2">
                </div>
                <button id="addPostBtn" class="btn-primary w-full py-4 text-base font-bold rounded-xl">
                    Add to Feed
                </button>
                <div class="post-tip" id="linkTip">
                    Tip: Instagram links will show an embed (image, and caption when Instagram allows it).
                </div>
            </div>
        </div>
    </div>

    <!-- Collections Modal -->
    <div id="collectionsModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="collectionsModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-1 modal-heading">Collections</h2>
            <p class="text-sm mb-4 modal-subtext">Filter posts by collection</p>
            <div class="collections-grid">
                <div class="collection-item" data-collection="">
                    <div class="text-2xl mb-1">*~*</div>
                    <div class="text-xs font-semibold collection-item-label">All</div>
                </div>
                <div class="collection-item" data-collection="funny">
                    <div class="text-2xl mb-1">xD</div>
                    <div class="text-xs font-semibold collection-item-label">Funny</div>
                </div>
                <div class="collection-item" data-collection="cute">
                    <div class="text-2xl mb-1">^_^</div>
                    <div class="text-xs font-semibold collection-item-label">Cute</div>
                </div>
                <div class="collection-item" data-collection="news">
                    <div class="text-2xl mb-1">[news]</div>
                    <div class="text-xs font-semibold collection-item-label">News</div>
                </div>
                <div class="collection-item" data-collection="inspiration">
                    <div class="text-2xl mb-1">*</div>
                    <div class="text-xs font-semibold collection-item-label">Inspire</div>
                </div>
                <div class="collection-item" data-collection="music">
                    <div class="text-2xl mb-1">&#x266B;</div>
                    <div class="text-xs font-semibold collection-item-label">Music</div>
                </div>
                <div class="collection-item" data-collection="idiot-drivers">
                    <div class="text-2xl mb-1">&gt;:(</div>
                    <div class="text-xs font-semibold collection-item-label">Idiots</div>
                </div>
                <div class="collection-item" data-collection="wishlist">
                    <div class="text-2xl mb-1">[w]</div>
                    <div class="text-xs font-semibold collection-item-label">Wishlist</div>
                </div>
                <div class="collection-item" data-collection="other">
                    <div class="text-2xl mb-1">[+]</div>
                    <div class="text-xs font-semibold collection-item-label">Other</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sources Modal -->
    <div id="sourcesModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="sourcesModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-1 modal-heading">Sources</h2>
            <p class="text-sm mb-4 modal-subtext">Filter posts by source (works with collections)</p>
            <div class="collections-grid">
                <div class="collection-item" data-source="">
                    <div class="text-2xl mb-1">*~*</div>
                    <div class="text-xs font-semibold collection-item-label">All</div>
                </div>
                <div class="collection-item" data-source="instagram">
                    <div class="text-2xl mb-1">[cam]</div>
                    <div class="text-xs font-semibold collection-item-label">Instagram</div>
                </div>
                <div class="collection-item" data-source="reddit">
                    <div class="text-2xl mb-1">O_O</div>
                    <div class="text-xs font-semibold collection-item-label">Reddit</div>
                </div>
                <div class="collection-item" data-source="x">
                    <div class="text-2xl mb-1">[X]</div>
                    <div class="text-xs font-semibold collection-item-label">X</div>
                </div>
                <div class="collection-item" data-source="youtube">
                    <div class="text-2xl mb-1">[&gt;]</div>
                    <div class="text-xs font-semibold collection-item-label">YouTube</div>
                </div>
                <div class="collection-item" data-source="tiktok">
                    <div class="text-2xl mb-1">&#x266B;</div>
                    <div class="text-xs font-semibold collection-item-label">TikTok</div>
                </div>
                <div class="collection-item" data-source="spotify">
                    <div class="text-2xl mb-1">[~]</div>
                    <div class="text-xs font-semibold collection-item-label">Spotify</div>
                </div>
                <div class="collection-item" data-source="news-site">
                    <div class="text-2xl mb-1">[news]</div>
                    <div class="text-xs font-semibold collection-item-label">News site</div>
                </div>
                <div class="collection-item" data-source="other">
                    <div class="text-2xl mb-1">[url]</div>
                    <div class="text-xs font-semibold collection-item-label">Other</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="editModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-4 modal-heading">Edit</h2>
            <div class="form-field">
                <label class="form-label" id="editLabel">Text</label>
                <textarea id="editTextarea" rows="4" placeholder="Edit..."></textarea>
            </div>
            <div class="modal-actions">
                <button id="editCancelBtn" class="btn-secondary px-4 py-3 text-sm font-semibold rounded-xl">Cancel</button>
                <button id="editSaveBtn" class="btn-primary px-4 py-3 text-sm font-semibold rounded-xl">Save</button>
            </div>
        </div>
    </div>

    <!-- Custom Delete Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-center">
            <div class="delete-modal-icon">(T_T)</div>
            <h2 class="text-xl font-black mb-2 modal-heading">
                are you sure you want to delete this, babe?!
            </h2>
            <p class="text-sm mb-5 modal-subtext">this can't be undone &lt;3</p>
            <div class="modal-actions">
                <button id="deleteCancelBtn" class="btn-secondary px-4 py-3 text-sm font-semibold rounded-xl">
                    nope, keep it &lt;3
                </button>
                <button id="deleteConfirmBtn" class="btn-primary btn-primary-dark px-4 py-3 text-sm font-semibold rounded-xl">
                    yes, delete (T_T)
                </button>
            </div>
        </div>
    </div>

    <!-- Board Delete Request Modal (shown to the non-owner when a shared board deletion is pending) -->
    <div id="boardDeleteRequestModal" class="modal">
        <div class="modal-content modal-center">
            <div class="delete-modal-icon">(o_o)</div>
            <h2 class="text-xl font-black mb-2 modal-heading">board deletion request</h2>
            <p class="text-sm mb-5 modal-subtext">
                <span id="boardDeleteRequestUser"></span> wants to delete the shared board
                "<span id="boardDeleteRequestTitle"></span>". This will remove it for both of you.
            </p>
            <div class="modal-actions">
                <button class="btn-secondary px-4 py-3 text-sm font-semibold rounded-xl" onclick="denyBoardDeletion()">
                    keep the board &lt;3
                </button>
                <button class="btn-primary btn-primary-dark px-4 py-3 text-sm font-semibold rounded-xl" onclick="confirmBoardDeletion()">
                    yes, delete it (T_T)
                </button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="historyModalClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-4 modal-heading">Edit history</h2>
            <div id="historyEntriesList" class="history-entries-list"></div>
            <div class="history-footer">
                <button id="historyCloseBtn" class="btn-secondary px-5 py-3 text-sm font-semibold rounded-xl">Close</button>
            </div>
        </div>
    </div>

    <!-- Notification permission modal -->
    <div id="notifPermModal" class="notif-perm-backdrop">
        <div class="notif-perm-card">
            <div class="notif-perm-icon">[!]</div>
            <div class="notif-perm-title">Desktop notifications</div>
            <p class="notif-perm-body">Get a notification when the other person shares something new or sends a message ‚Äî even when you're in another tab.</p>
            <button id="notifAllowBtn" class="notif-perm-allow">Allow notifications</button>
            <button id="notifDenyBtn" class="notif-perm-deny">Not now</button>
        </div>
    </div>

    <!-- Scroll to top -->
    <button id="scrollTopBtn" title="Back to top">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 15l7-7 7 7"/>
        </svg>
    </button>

    <!-- Activity feed widget -->
    <button class="activity-fab" id="activityFab">
        [@] what's new <span id="activityBadge" class="new-badge hidden">0</span>
    </button>

    <div id="activityPanel" class="activity-panel">
        <div class="activity-header">
            <div class="activity-title">** what's new</div>
        </div>
        <div id="activityBody" class="activity-body"></div>
    </div>

    <!-- Chat widget -->
    <button class="chat-fab" id="chatFab">
        [~] chat <span id="chatUnread" class="new-badge hidden">0</span>
    </button>

    <div id="chatPanel" class="chat-panel">
        <div class="chat-header">
            <div class="chat-title">
                <span class="presence-dot offline" data-user="El" title="El"></span>&lt;3 el &amp; tero &lt;3<span class="presence-dot offline" data-user="Tero" title="Tero"></span>
            </div>
        </div>
        <div id="chatBody" class="chat-body"></div>
        <button id="chatNewMsgBtn" class="chat-new-msg-btn hidden" type="button">New messages ‚Üì</button>
        <div id="chatTypingIndicator" class="typing-indicator hidden"></div>
        <div class="chat-input-wrap">
            <div class="chat-input-positioner">
                <textarea id="chatInput" class="chat-input" placeholder="say something... ^_^" rows="1"
                    role="combobox" aria-autocomplete="list" aria-expanded="false"
                    aria-controls="chatAutocomplete" aria-haspopup="listbox" autocomplete="off"></textarea>
                <ul id="chatAutocomplete" class="chat-autocomplete hidden" role="listbox" aria-label="slash commands"></ul>
            </div>
            <div class="chat-hint">Enter ‚Üµ to send ¬∑ Shift+Enter for new line</div>
        </div>
    </div>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script async src="https://www.instagram.com/embed.js"></script>

    <!-- Offline status pill (fixed, top-left) -->
    <div id="netStatus" class="net-status">Offline</div>

    <!-- About Us modal -->
    <div id="aboutModal" class="about-backdrop">
        <div class="about-card">
            <div class="about-header">
                <div class="about-title">About us</div>
                <button id="aboutClose" class="about-close-btn" aria-label="Close">‚úï</button>
            </div>
            <div class="about-body">
                <p><strong>El</strong>, and <strong>Tero</strong>. &lt;3</p>
                <p>
                    if you somehow found this site and you are not el or tero,
                    these are just social media posts we send each other.
                    hi, i guess??  :)
                </p>
                <p style="font-family:'Courier New',monospace;font-size:11px;opacity:0.7;">
                    ¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-¬∑-
                </p>
                <p>
                    <a href="https://github.com/el69420/Personal-Feed" target="_blank" rel="noreferrer">Project on GitHub</a>
                </p>
                <p class="about-tip">
                    Tip: press Escape to close this. ^_^
                </p>
            </div>
        </div>
    </div>

    <!-- Board Picker Modal -->
    <div id="boardPickerModal" class="modal">
        <div class="modal-content modal-sm">
            <button class="modal-x" id="boardPickerClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-4 modal-heading">[::] Save to Board</h2>
            <div id="boardPickerList" class="board-picker-list"></div>
            <button class="btn-secondary w-full mt-3" style="padding:10px;border-radius:10px;font-size:13px;" onclick="openCreateBoardModal()">+ New Board</button>
        </div>
    </div>

    <!-- Create Board Modal -->
    <div id="createBoardModal" class="modal">
        <div class="modal-content modal-sm">
            <button class="modal-x" id="createBoardClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">New Board</h2>
            <div class="space-y-4">
                <div class="form-field">
                    <label class="form-label">Name</label>
                    <input type="text" id="boardNameInput" placeholder="My board‚Ä¶">
                </div>
                <label class="board-shared-label">
                    <input type="checkbox" id="boardSharedToggle">
                    <span>Shared with both of us</span>
                </label>
                <button id="createBoardConfirmBtn" class="btn-primary w-full py-3 rounded-xl">Create Board</button>
            </div>
        </div>
    </div>

    <!-- Compose Letter Modal -->
    <div id="composeLetterModal" class="modal">
        <div class="modal-content">
            <button class="modal-x" id="composeLetterClose" title="Close">‚úï</button>
            <h2 class="text-xl font-bold mb-5 modal-heading">[@] Write a Letter :)</h2>
            <div class="space-y-4">
                <div class="form-field">
                    <label class="form-label">Subject <span class="coll-pick-label">(optional)</span></label>
                    <input type="text" id="letterSubject" placeholder="No subject">
                </div>
                <div class="form-field">
                    <label class="form-label">Message</label>
                    <textarea id="letterBody" rows="6" placeholder="Write something lovely‚Ä¶"></textarea>
                </div>
                <button id="sendLetterBtn" class="btn-primary w-full py-4 text-base font-bold rounded-xl">Send ^_^</button>
            </div>
        </div>
    </div>

    <!-- About Us button (fixed, top-right) -->
    <button id="aboutBtn">about</button>

    <script type="module" src="app.js"></script>
    <script src="cursor-trail.js"></script>

    <div id="w95-taskbar" class="w95-taskbar"></div>

<div id="w95-win-garden" class="w95-window is-hidden">
  <div class="w95-titlebar" id="w95-garden-handle">
    <div class="w95-title">Our Garden</div>
    <button class="w95-control" id="w95-garden-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-garden-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-garden-close" type="button" aria-label="Close">X</button>
  </div>

  <div class="w95-body">
    <div class="garden-top">
      <div id="garden-info" class="garden-info">
        <div class="garden-section-hdr">Today</div>
        <div id="gpr-0" class="garden-plant-row"></div>
        <div class="garden-section-hdr">Streaks</div>
        <div id="garden-streak" class="garden-streak"></div>
        <div id="garden-shared-streak" class="garden-streak"></div>
        <div id="garden-ritual" class="garden-ritual" style="display:none"></div>
        <div class="garden-section-hdr">Weather</div>
        <div id="garden-weather" class="garden-weather-display"></div>
      </div>
      <div id="garden-tiles-row" class="garden-tiles-row"></div>
    </div>
    <div id="garden-journal" class="garden-journal" style="display:none">
      <div class="garden-journal-header">‚ú¶ Garden Journal</div>
      <div id="garden-journal-entries" class="garden-journal-entries"></div>
    </div>
  </div>
</div>

<!-- Chat window wrapper -->
<div id="w95-win-chat" class="w95-window is-hidden" style="left:420px; top:60px; width:360px; height:420px;">
  <div class="w95-titlebar" id="w95-chat-handle">
    <div class="w95-title"><span class="presence-dot offline" data-user="El" title="El"></span> Chat <span class="presence-dot offline" data-user="Tero" title="Tero"></span></div>
    <button class="w95-control" id="w95-chat-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-chat-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-chat-close" type="button" aria-label="Close">X</button>
  </div>
  <div class="w95-body" id="w95-chat-body"></div>
</div>

<!-- What‚Äôs New window wrapper -->
<div id="w95-win-new" class="w95-window is-hidden" style="left:20px; top:60px; width:360px; height:380px;">
  <div class="w95-titlebar" id="w95-new-handle">
    <div class="w95-title">What‚Äôs New</div>
    <button class="w95-control" id="w95-new-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-new-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-new-close" type="button" aria-label="Close">X</button>
  </div>
  <div class="w95-body" id="w95-new-body"></div>
</div>

<!-- Achievements window -->
<div id="w95-win-achievements" class="w95-window is-hidden" style="left:80px; top:80px; width:300px;">
  <div class="w95-titlebar" id="w95-achievements-handle">
    <div class="w95-title">Achievements</div>
    <button class="w95-control" id="w95-achievements-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-achievements-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-achievements-close" type="button" aria-label="Close">X</button>
  </div>
  <div class="w95-body" id="w95-achievements-body">
    <div class="achievement-placeholder">Sign in to view achievements</div>
  </div>
</div>

<!-- Mailbox window -->
<div id="w95-win-mailbox" class="w95-window is-hidden" style="left:200px;top:60px;width:390px;height:420px;">
  <div class="w95-titlebar" id="w95-mailbox-handle">
    <div class="w95-title">&#9993; Mailbox.exe</div>
    <button class="w95-control" id="w95-mailbox-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-mailbox-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-mailbox-close" type="button" aria-label="Close">X</button>
  </div>
  <div class="w95-body w95-mailbox-body" id="w95-mailbox-body">
    <div class="boards-header" style="margin-bottom:8px;">
      <h2 class="boards-title">Mailbox</h2>
      <button class="btn-primary boards-action-btn" onclick="openComposeLetter()">[+] Write</button>
    </div>
    <div class="mailbox-tabs">
      <button class="mailbox-tab active" id="tabInbox" onclick="switchMailboxTab('inbox')">
        Inbox <span id="inboxUnread" class="new-badge hidden">0</span>
      </button>
      <button class="mailbox-tab" id="tabSent" onclick="switchMailboxTab('sent')">Sent</button>
    </div>
    <div id="mailboxBody" class="mailbox-body"></div>
  </div>
</div>

<!-- Jukebox window -->
<div id="w95-win-jukebox" class="w95-window is-hidden" style="left:400px;top:60px;width:360px;">
  <div class="w95-titlebar" id="w95-jukebox-handle">
    <div class="w95-title">&#127926; Jukebox.exe</div>
    <button class="w95-control" id="w95-jukebox-min" type="button" aria-label="Minimise">_</button>
    <button class="w95-control" id="w95-jukebox-max" type="button" aria-label="Maximise">&#9633;</button>
    <button class="w95-control w95-control-close" id="w95-jukebox-close" type="button" aria-label="Close">X</button>
  </div>
  <div class="w95-body" id="w95-jukebox-body">
    <div id="nowListeningBar" class="now-listening-bar">
      <div class="nl-label">now listening</div>
      <div class="nl-cards">
        <div class="nl-card" id="nlCardEl">
          <img class="nl-art" id="nlArtEl" src="" alt="">
          <div class="nl-info">
            <div class="nl-user-badge">&lt;3 El</div>
            <div class="nl-track" id="nlTrackEl">‚Äî</div>
            <div class="nl-artist" id="nlArtistEl"></div>
            <div class="nl-status" id="nlStatusEl"></div>
          </div>
        </div>
        <div class="nl-card" id="nlCardTero">
          <img class="nl-art" id="nlArtTero" src="" alt="">
          <div class="nl-info">
            <div class="nl-user-badge">&lt;3 Tero</div>
            <div class="nl-track" id="nlTrackTero">‚Äî</div>
            <div class="nl-artist" id="nlArtistTero"></div>
            <div class="nl-status" id="nlStatusTero"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>



